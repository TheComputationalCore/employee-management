# ================================
# PRODUCTION CONFIG (Railway)
# ================================

# --- Database (Railway provides these env vars automatically) ---
# MYSQLHOST, MYSQLPORT, MYSQLUSER, MYSQLPASSWORD, MYSQLDATABASE
spring.datasource.url=jdbc:mysql://${MYSQLHOST}:${MYSQLPORT}/${MYSQLDATABASE}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=${MYSQLUSER}
spring.datasource.password=${MYSQLPASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# --- Connection Pooling (safe defaults, override via ENV if needed) ---
spring.datasource.hikari.maximum-pool-size=${HIKARI_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${HIKARI_MIN_IDLE:2}
spring.datasource.hikari.connection-timeout=${HIKARI_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=${HIKARI_IDLE_TIMEOUT:300000}
spring.datasource.hikari.max-lifetime=${HIKARI_MAX_LIFETIME:1800000}

# --- Hibernate / JPA ---
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# --- Flyway (enabled in prod) ---
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true

# --- File Storage ---
# Railway’s file system is ephemeral → writing resumes, PDFs, exports, etc.
# will reset on each deploy. If you want persistence you need S3 or BunnyCDN,
# but for now this keeps your app running.
app.upload.dir=/data/uploads

# --- Actuator ---
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=never

# --- Server Port ---
# Railway sets PORT at runtime
server.port=${PORT:8080}
