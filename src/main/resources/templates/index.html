<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="layout :: content">

<th:block th:with="pageTitle='Dashboard', content='this :: contentFragment'">

    <div th:fragment="contentFragment">

        <!-- ======================= DASHBOARD CARDS ======================= -->
        <div class="row g-4">
            <div class="col-md-4">
                <div class="dashboard-card gradient-blue">
                    <h5>Total Employees</h5>
                    <h2 th:text="${employees.size()}"></h2>
                    <i class="bi bi-people"></i>
                </div>
            </div>

            <div class="col-md-4">
                <div class="dashboard-card gradient-purple">
                    <h5>Departments</h5>
                    <h2 th:text="${departmentsCount}"></h2>
                    <i class="bi bi-building"></i>
                </div>
            </div>

            <div class="col-md-4">
                <div class="dashboard-card gradient-green">
                    <h5>Positions</h5>
                    <h2 th:text="${positionsCount}"></h2>
                    <i class="bi bi-briefcase"></i>
                </div>
            </div>
        </div>

        <!-- ======================= SEARCH BAR ======================= -->
        <div class="row mt-5 mb-3">
            <div class="col-md-6">
                <input id="searchInput" type="text" class="form-control form-control-lg shadow-sm search-input"
                       placeholder="Search employees...">
            </div>

            <div class="col-md-6 text-end">
                <a th:href="@{/web/employees/new}" class="btn btn-primary btn-lg shadow">
                    <i class="bi bi-plus-lg me-1"></i> Add Employee
                </a>
            </div>
        </div>

        <!-- ======================= EMPLOYEE TABLE ======================= -->
        <div class="table-responsive glass-table shadow-sm">
            <table class="table align-middle">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Department</th>
                    <th>Position</th>
                    <th>Salary</th>
                    <th style="width:140px;">Actions</th>
                </tr>
                </thead>

                <tbody id="employeeTable">
                <tr th:each="e : ${employees}">
                    <td th:text="${e.id}"></td>
                    <td th:text="${e.firstName + ' ' + e.lastName}"></td>
                    <td th:text="${e.email}"></td>
                    <td th:text="${e.department}"></td>
                    <td th:text="${e.position}"></td>
                    <td th:text="${#numbers.formatDecimal(e.salary, 0, 'COMMA', 2, 'POINT')}"></td>

                    <td>
                        <a th:href="@{/web/employees/edit/{id}(id=${e.id})}" class="btn btn-sm btn-warning me-1">
                            <i class="bi bi-pencil-square"></i>
                        </a>

                        <a th:href="@{/web/employees/delete/{id}(id=${e.id})}" class="btn btn-sm btn-danger">
                            <i class="bi bi-trash"></i>
                        </a>
                    </td>
                </tr>
                </tbody>

            </table>
        </div>

    </div>

</th:block>

</html>
